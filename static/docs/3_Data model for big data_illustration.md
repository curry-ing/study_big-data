# 3. 빅데이터를 위한 데이터 모델: 사례

> 학습목표
- 아파치 스리프트
- 아파치 스리프트를 사용한 그래프 스키마 구현
- 직렬화 프레임워크의 한계

## 3.1 어째서 직렬화 프레임워크인가?

#### Schema vs Schemaless
- **schema-less**: 단순하여 쉽게 접근할 수 있지만, 쉽게 오염될 수 있다 (json 등)
- **schema**: 데이터가 강건하게 유지(잘못된 데이터 입력시 Exception) (rdbms의 테이블 구조?)

#### 직렬화 프레임워크
- 강제가능 스키마를 쉽게 적용 가능
- 객체를 스키마에 맞춰 읽고, 쓰고, 유효성을 검증하는 코드를 원하는 코드로 생성
- 한계: 완전히 엄격한 스키마를 달성 불가


## 3.2 아파치 스리프트
- 인터페이스 정의 언어(interface definition language)로 정적 타입의 강제가능 스키마를 정의
- 이종 언어간 인터페이스를 위해 개발되었으나 현재는 여러 목적으로 사용됨

#### 주요 구성요소
구조체(struct)와 공용체(union) 타입 정의
- 기본 데이터 타입(string, int, long, double)
- 컬렉션(List, Map, Set)
- 다른 구조체와 공용체

Node: 공용체, Edge: 구조체, Attribute: 이들의 조합

### 3.2.1 Node
- **Union** 에 적합
  - 하나의 값으로 여러가지를 나타내는 타입 (물론, 한 가지만 나타내는 노드에도 적합)
  - 사용자 node에서 개인은 사용자 ID나 쿠키로 식별 가능하나 동시에 식별에 사용되지는 않음
  - 데이터 발전에 따른 스키마의 발전이 허용

##### 스리프트 공용체를 사용하여 `SuperWebAnalytics.com`중 일부 노드 정의  
[schema.thrift](../../models/schema.thrift)

### 3.2.2 Edge

### 3.2.3 Attribute

### 3.2.4 노드, 간선, 속성을 모두 엮어 데이터 객체로 만들기

### 3.2.5 스키마 발전시키기


## 3.3 직렬화 프레임워크의 한계


## 3.4 마무리
